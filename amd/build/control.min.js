define(["core/ajax"],function(o){return{init:function(){function e(e){e.preventDefault();var t,n,e=document.getElementById("message-input").value;document.getElementById("message-input").value="",t=e,(d=document.createElement("span")).className="chat-bubble user",d.textContent=t,document.getElementById("messages-container").appendChild(d),(t=document.createElement("div")).className="col-3",t.id="typing-animation",(d=document.createElement("div")).className="snippet",d.setAttribute("data-title","dot-typing"),(c=document.createElement("div")).className="stage",(n=document.createElement("div")).className="dot-typing",c.appendChild(n),d.appendChild(c),t.appendChild(d),n=document.getElementById("messages-container");var a,c=document.getElementById("messages-container"),d=document.querySelector("#typing-animation");c&&d&&(c=c.clientHeight,a=d.offsetHeight,d.style.top=c-a+"px"),n.insertAdjacentElement("beforeend",t),s(),d=e,s(),o.call([{methodname:"block_cgschatbot_get_answer",args:{question:d},done:function(e){var t,n;(t=document.getElementById("typing-animation"))&&t.remove(),t=e.answer,(e=document.createElement("span")).className="chat-bubble assistant",(n=document.createElement("img")).src=M.util.image_url("icon","block_cgschatbot"),n.className="icon",e.appendChild(n),e.appendChild(document.createTextNode(t)),document.getElementById("messages-container").appendChild(e),document.getElementById("message-input").disabled=!1,document.querySelector(".cgschatbot-ask").disabled=!1},fail:function(e){console.log(e)}}])}function s(){document.getElementById("message-input").disabled=!0,document.querySelector(".cgschatbot-ask").disabled=!0}document.querySelector(".cgschatbot-ask").addEventListener("click",e),document.querySelector(".cgschatbot-ask").addEventListener("keypress",e)}}});